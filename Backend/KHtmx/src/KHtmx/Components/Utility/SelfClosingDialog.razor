<dialog id="@Id">
    @ChildContent
    
    <script type="module">
        const dialog = document.querySelector("#@Id");
        dialog.showModal();
        
        // Adds a click-listener to the dialog that closes it when the user clicks outside of it, but only if the user started and ended the click outside of the dialog.
        // This prevents the dialog from closing when the user tries to select something inside the modal and accidentally drags their mouse outside before releasing.
        let mouseDownInsideDialog = false;
        dialog.addEventListener("mousedown", (e) => {
            mouseDownInsideDialog = e.target === dialog;
        });
        
        dialog.addEventListener("mouseup", (e) => {
            if (e.target === dialog && mouseDownInsideDialog) {
                dialog.close();
            }
        });
        
        dialog.addEventListener("close", () => {
            dialog.remove();
        });
    </script>
</dialog>

@code {

    [Parameter, EditorRequired]
    public string? Id { get; init; }

    [Parameter]
    public RenderFragment? ChildContent { get; init; }
}